# Syshammer Example Config - basic.cfg
# Exercises sequential + parallel stages with all modules

[global]
tag = basic_test
sample_period_ms = 1000
stop_on_fail = false
report_embed_logs = true
report_log_tail_lines = 50

[module_defaults]
duration_s = 30

[plan]
stages = stress_seq,io_parallel,comms,buses

# Stage 1: Sequential CPU + memory stress
[stage.stress_seq]
mode = sequential
members = cpu,memory,ddr

# Stage 2: Parallel I/O
[stage.io_parallel]
mode = parallel
members = flash
timeout_s = 120

# Stage 3: Communications tests (sequential)
[stage.comms]
mode = sequential
members = comm_eth,comm_wifi,comm_ble

# Stage 4: Bus tests (sequential)
[stage.buses]
mode = sequential
members = bus_spi,bus_i2c,gpu,npu_rknn

# --- Module configurations ---

[module.cpu]
duration_s = 60
workers = 0
# workers=0 means auto-detect (nproc)
temp_warn_c = 80
temp_fail_c = 95

[module.memory]
duration_s = 60
workers = 1
vm_bytes = 80%

[module.ddr]
duration_s = 30
workers = 0
method = stream

[module.flash]
duration_s = 30
test_dir = /tmp
bs = 4k
size = 64m

[module.comm_eth]
duration_s = 20
iface = eth0
target = 8.8.8.8
max_loss_pct = 5

[module.comm_wifi]
duration_s = 20
iface = wlan0
target = 8.8.8.8
max_loss_pct = 10
rssi_warn_dbm = -75

[module.comm_ble]
duration_s = 15
scan_cycles = 5

[module.bus_spi]
# Uncomment and set device to enable:
# device = /dev/spidev0.0
# speed = 1000000
# iterations = 100

[module.bus_i2c]
# Uncomment and set bus/addr to enable:
# bus = 0
# addr = 0x50
# reg = 0x00
# iterations = 100

[module.gpu]
enable = false

[module.npu_rknn]
enable = false
